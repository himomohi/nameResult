<!DOCTYPE html>
<html data-theme="dark">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>한글 이름 궁합 판단기</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
</head>

<body>
  <div class="container">
    <h1>Name Result</h1>
    <div class="container">
      <form>
        <label for="name1">이름 1:</label>
        <input type="text" id="name1" name="name1" required>
        <label for="name2">이름 2:</label>
        <input type="text" id="name2" name="name2" required>
        <button type="submit">결과 확인</button>
      </form>
      <div id="result" class="result"></div>
    </div>
  </div>
  <script>
    const form = document.querySelector('form');
    const resultDiv = document.querySelector('#result');

    function calculateCompatibility(event) {
      event.preventDefault();

      const name1 = document.querySelector('#name1').value.trim();
      const name2 = document.querySelector('#name2').value.trim();

      const compatibility = calculateCompatibilityScore(name1, name2);

      const resultText = `${name1}과(와) ${name2}의 궁합은 ${compatibility}% 입니다.`;
      resultDiv.textContent = resultText;
    }

    function calculateCompatibilityScore(name1, name2) {
      const alphabetScore = {
        "ㄱ": 2, "ㄴ": 2, "ㄷ": 3, "ㄹ": 5, "ㅁ": 4, "ㅂ": 4, "ㅅ": 2, "ㅇ": 1, "ㅈ": 3, "ㅊ": 4, "ㅋ": 3, "ㅌ": 4, "ㅍ": 4, "ㅎ": 3,
        "ㅏ": 2, "ㅑ": 3, "ㅓ": 2, "ㅕ": 3, "ㅗ": 2, "ㅛ": 3, "ㅜ": 2, "ㅠ": 3, "ㅡ": 1, "ㅣ": 1, "ㅐ": 3, "ㅒ": 4, "ㅔ": 3, "ㅖ": 4, "ㅘ": 4, "ㅙ": 5, "ㅚ": 4, "ㅝ": 4, "ㅞ": 5, "ㅟ": 3, "ㅢ": 2
      };

      const name1Upper = name1.toUpperCase();
      const name2Upper = name2.toUpperCase();

      let compatibilityStr = '';
      const minLength = Math.min(name1Upper.length, name2Upper.length);
      for (let i = 0; i < minLength; i++) {
        compatibilityStr += name1Upper.charAt(i) + name2Upper.charAt(i) in alphabetScore ? alphabetScore[name1Upper.charAt(i)] + alphabetScore[name2Upper.charAt(i)] : 0;
      }

      compatibilityStr += minLength === name1Upper.length ? name2Upper.slice(minLength) : name1Upper.slice(minLength);

      let scores = Array.from(compatibilityStr, char => (char in alphabetScore) ? alphabetScore[char] : 0);
      while (scores.length > 2) {
        scores = scores.reduce((newScores, score, index) => {
          if (index === scores.length - 1) {
            return newScores;
          }
          newScores.push((score + scores[index + 1]) % 10);
          return newScores;
        }, []);
      }

      const compatibility = parseInt(scores.join(''), 10);

      return compatibility;
    }

    form.addEventListener('submit', calculateCompatibility);
  </script>